# 7.10 T309.最佳买卖股票时机含冷冻期

## 题目
给定一个整数数组，其中第 i 个元素代表了第 i 天的股票价格 。​
设计一个算法计算出最大利润。在满足以下约束条件下，你可以尽可能地完成更多的交易（多次买卖一支股票）:

你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。
卖出股票后，你无法在第二天买入股票 (即冷冻期为 1 天)。

示例:
```
输入: [1,2,3,0,2]
输出: 3 
解释: 对应的交易状态为: [买入, 卖出, 冷冻期, 买入, 卖出]
```
来源：力扣（LeetCode）
链接：https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-cooldown
著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。

## 题解
动态规划

分情况：
1. `f[i][0]`，截至第i天，手中有股票
2. `f[i][1]`，第i天把手中股票卖出，手中已无股票（意味着，且第i+1天无法购入）
3. `f[i][2]`，截至第i天，手中无股票，且不是第i天卖出（意味着第i+1天可以购入）

购入，相当于与扣钱；卖出，等于加钱。

状态转移：
$f[i][0] = \max(f[i-1][2] - prices[i], f[i-1][0])$
$f[i][1] = f[i-1][0] + prices[i]$
$f[i][2] = \max(f[i-1][2], f[i-1][1])$

```python
class Solution:
    def maxProfit(self, prices: List[int]) -> int:
        res = 0; n = len(prices)
        if n==0: return 0
        
        # f[i]表示第i天：有股票；没有股票，当天卖出；没有股票，不是当天卖出
        f = [[0]*3 for _ in range(n)]

        f[0][0] = -prices[0]
        for i in range(1, n):
            f[i][0] = max(f[i-1][2] - prices[i], f[i-1][0])
            f[i][1] = f[i-1][0] + prices[i]
            f[i][2] = max(f[i-1][1], f[i-1][2])
            
        return max(f[n-1][1], f[n-1][2])
```
时间复杂度$O(n)$，空间复杂度$O(n)$

